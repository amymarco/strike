!RBIX
9595534255132031488
x
M
1
n
n
x
10
__script__
i
44
5
45
0
1
45
0
2
45
0
3
65
49
4
0
49
5
1
49
6
1
7
7
64
49
8
2
47
49
9
1
15
5
7
10
64
56
11
47
50
12
1
15
2
11
I
5
I
0
I
0
I
0
n
p
13
x
4
File
n
n
n
x
11
active_path
x
11
expand_path
x
7
dirname
s
11
spec_helper
x
4
join
x
7
require
s
31
Sequel::Plugins::AssociationPks
M
1
p
2
x
9
for_block
t
n
x
9
__block__
i
118
5
56
0
47
50
1
0
15
5
7
2
64
56
3
47
50
4
1
15
5
7
5
64
56
6
47
50
4
1
15
5
7
7
64
56
8
47
50
4
1
15
5
7
9
64
56
10
47
50
4
1
15
5
7
11
64
56
12
47
50
4
1
15
5
7
13
64
56
14
47
50
4
1
15
5
7
15
64
56
16
47
50
4
1
15
5
7
17
64
56
18
47
50
4
1
15
5
7
15
64
56
19
47
50
4
1
15
5
7
20
64
56
21
47
50
4
1
11
I
4
I
0
I
0
I
0
I
-2
p
22
M
1
p
2
x
9
for_block
t
n
x
9
__block__
i
313
45
0
1
44
43
2
79
49
3
1
13
7
4
5
56
5
47
50
6
0
49
7
2
15
49
8
1
38
9
15
45
10
11
13
71
12
47
9
64
47
49
13
0
13
45
0
14
39
9
7
15
49
16
1
49
17
1
47
49
18
1
15
8
80
45
0
19
39
9
7
15
49
16
1
49
17
1
49
12
1
38
20
15
39
20
7
21
49
22
1
15
45
10
23
13
71
12
47
9
125
47
49
13
0
13
45
0
24
39
9
7
25
49
16
1
49
17
1
47
49
18
1
15
8
141
45
0
26
39
9
7
25
49
16
1
49
17
1
49
12
1
38
27
15
39
27
7
21
7
28
49
22
2
15
45
10
29
13
71
12
47
9
188
47
49
13
0
13
45
0
30
39
9
7
31
49
16
1
49
17
1
47
49
18
1
15
8
204
45
0
32
39
9
7
31
49
16
1
49
17
1
49
12
1
38
33
15
39
33
7
21
49
22
1
15
39
20
7
34
49
35
1
15
39
27
7
34
49
35
1
15
39
20
7
25
44
43
2
80
49
3
1
13
7
36
39
27
49
7
2
15
13
7
37
7
28
49
7
2
15
49
38
2
15
39
27
7
31
44
43
2
4
3
49
3
1
13
7
36
39
33
49
7
2
15
13
7
39
7
40
49
7
2
15
13
7
41
7
42
49
7
2
15
49
43
2
15
39
9
49
44
0
11
I
7
I
0
I
0
I
0
I
-2
p
45
x
6
Sequel
n
x
4
Hash
x
16
new_from_literal
x
5
fetch
M
1
p
2
x
9
for_block
t
n
x
9
__block__
i
217
57
19
0
15
20
0
13
7
0
64
12
49
1
1
9
67
15
44
43
2
79
49
3
1
13
7
4
79
49
5
2
15
44
43
2
79
49
3
1
13
7
4
80
49
5
2
15
44
43
2
79
49
3
1
13
7
4
4
3
49
5
2
15
35
3
8
216
13
7
6
13
70
9
86
15
44
43
7
7
8
78
49
9
2
6
6
12
49
1
1
9
214
15
35
0
19
1
15
4
5
78
98
10
2
7
11
64
83
12
9
133
20
1
44
43
2
79
49
3
1
13
7
13
79
49
5
2
15
49
14
1
8
134
1
15
4
5
78
98
10
2
7
15
64
83
12
9
151
1
8
171
20
1
44
43
2
79
49
3
1
13
7
13
80
49
5
2
15
49
14
1
15
4
5
78
98
10
2
7
16
64
83
12
9
208
20
1
44
43
2
79
49
3
1
13
7
13
4
3
49
5
2
15
49
14
1
8
209
1
15
20
1
8
216
15
1
11
I
9
I
2
I
1
I
1
n
p
17
s
50
SELECT id FROM albums WHERE (albums.artist_id = 1)
x
3
===
x
4
Hash
x
16
new_from_literal
x
2
id
x
3
[]=
n
x
6
Regexp
s
56
SELECT tag_id FROM albums_tags WHERE \(album_id = (\d)\)
x
3
new
x
24
regexp_last_match_result
s
1
1
x
2
==
x
6
tag_id
x
2
<<
s
1
3
s
1
2
p
31
I
0
I
5
I
4
I
6
I
6
I
7
I
11
I
8
I
43
I
9
I
5d
I
a
I
62
I
b
I
86
I
0
I
87
I
c
I
ab
I
0
I
ac
I
d
I
d1
I
0
I
d2
I
e
I
d7
I
6
I
d8
I
0
I
d9
x
120
/Users/jhbabon/Code/projects/wuakitv/src/shield/vendor/bundle/gems/sequel-3.39.0/spec/extensions/association_pks_spec.rb
p
2
x
3
sql
x
1
a
x
4
proc
x
3
[]=
x
4
mock
x
3
@db
x
5
Class
n
x
3
new
x
8
allocate
n
x
7
artists
x
2
[]
x
5
Model
x
10
initialize
n
x
7
@Artist
x
2
id
x
7
columns
n
n
x
6
albums
n
x
6
@Album
x
9
artist_id
n
n
x
4
tags
n
x
4
@Tag
x
15
association_pks
x
6
plugin
x
5
class
x
3
key
x
11
one_to_many
x
10
join_table
x
11
albums_tags
x
8
left_key
x
8
album_id
x
12
many_to_many
x
4
sqls
p
29
I
0
I
5
I
3
I
10
I
b
I
5
I
1e
I
11
I
53
I
12
I
5b
I
13
I
90
I
14
I
9a
I
15
I
cf
I
16
I
d7
I
17
I
df
I
18
I
e7
I
19
I
108
I
1a
I
133
I
1b
I
139
x
120
/Users/jhbabon/Code/projects/wuakitv/src/shield/vendor/bundle/gems/sequel-3.39.0/spec/extensions/association_pks_spec.rb
p
0
x
6
before
s
65
should return correct associated pks for one_to_many associations
M
1
p
2
x
9
for_block
t
n
x
9
__block__
i
66
39
0
44
43
1
79
49
2
1
13
7
3
79
49
4
2
15
49
5
1
49
6
0
49
7
0
79
80
4
3
35
3
83
8
15
39
0
44
43
1
79
49
2
1
13
7
3
80
49
4
2
15
49
5
1
49
6
0
49
7
0
35
0
83
8
11
I
6
I
0
I
0
I
0
I
-2
p
9
x
7
@Artist
x
4
Hash
x
16
new_from_literal
x
2
id
x
3
[]=
x
4
load
x
9
album_pks
x
6
should
x
2
==
p
5
I
0
I
1f
I
23
I
20
I
42
x
120
/Users/jhbabon/Code/projects/wuakitv/src/shield/vendor/bundle/gems/sequel-3.39.0/spec/extensions/association_pks_spec.rb
p
0
x
7
specify
s
66
should return correct associated pks for many_to_many associations
M
1
p
2
x
9
for_block
t
n
x
9
__block__
i
99
39
0
44
43
1
79
49
2
1
13
7
3
79
49
4
2
15
49
5
1
49
6
0
49
7
0
79
80
35
2
83
8
15
39
0
44
43
1
79
49
2
1
13
7
3
80
49
4
2
15
49
5
1
49
6
0
49
7
0
80
4
3
35
2
83
8
15
39
0
44
43
1
79
49
2
1
13
7
3
4
3
49
4
2
15
49
5
1
49
6
0
49
7
0
35
0
83
8
11
I
6
I
0
I
0
I
0
I
-2
p
9
x
6
@Album
x
4
Hash
x
16
new_from_literal
x
2
id
x
3
[]=
x
4
load
x
7
tag_pks
x
6
should
x
2
==
p
7
I
0
I
24
I
21
I
25
I
43
I
26
I
63
x
120
/Users/jhbabon/Code/projects/wuakitv/src/shield/vendor/bundle/gems/sequel-3.39.0/spec/extensions/association_pks_spec.rb
p
0
s
65
should set associated pks correctly for a one_to_many association
M
1
p
2
x
9
for_block
t
n
x
9
__block__
i
51
39
0
44
43
1
79
49
2
1
13
7
3
79
49
4
2
15
49
5
1
79
80
35
2
13
18
2
49
6
1
15
15
39
7
49
8
0
49
9
0
7
10
64
7
11
64
35
2
83
12
11
I
6
I
0
I
0
I
0
I
-2
p
13
x
7
@Artist
x
4
Hash
x
16
new_from_literal
x
2
id
x
3
[]=
x
4
load
x
10
album_pks=
x
3
@db
x
4
sqls
x
6
should
s
52
UPDATE albums SET artist_id = 1 WHERE (id IN (1, 2))
s
88
UPDATE albums SET artist_id = NULL WHERE ((albums.artist_id = 1) AND (id NOT IN (1, 2)))
x
2
==
p
7
I
0
I
2a
I
20
I
2b
I
2b
I
2c
I
33
x
120
/Users/jhbabon/Code/projects/wuakitv/src/shield/vendor/bundle/gems/sequel-3.39.0/spec/extensions/association_pks_spec.rb
p
0
s
71
should use associated class's primary key for a one_to_many association
M
1
p
2
x
9
for_block
t
n
x
9
__block__
i
59
39
0
7
1
49
2
1
15
39
3
44
43
4
79
49
5
1
13
7
6
79
49
7
2
15
49
8
1
79
80
35
2
13
18
2
49
9
1
15
15
39
10
49
11
0
49
12
0
7
13
64
7
14
64
35
2
83
15
11
I
6
I
0
I
0
I
0
I
-2
p
16
x
6
@Album
x
3
foo
x
15
set_primary_key
x
7
@Artist
x
4
Hash
x
16
new_from_literal
x
2
id
x
3
[]=
x
4
load
x
10
album_pks=
x
3
@db
x
4
sqls
x
6
should
s
53
UPDATE albums SET artist_id = 1 WHERE (foo IN (1, 2))
s
89
UPDATE albums SET artist_id = NULL WHERE ((albums.artist_id = 1) AND (foo NOT IN (1, 2)))
x
2
==
p
9
I
0
I
30
I
8
I
31
I
28
I
32
I
33
I
33
I
3b
x
120
/Users/jhbabon/Code/projects/wuakitv/src/shield/vendor/bundle/gems/sequel-3.39.0/spec/extensions/association_pks_spec.rb
p
0
s
66
should set associated pks correctly for a many_to_many association
M
1
p
2
x
9
for_block
t
n
x
9
__block__
i
115
39
0
44
43
1
79
49
2
1
13
7
3
80
49
4
2
15
49
5
1
79
4
3
35
2
13
18
2
49
6
1
15
15
39
7
49
8
0
19
0
15
20
0
78
49
9
1
49
10
0
7
11
64
83
12
15
20
0
79
49
9
1
49
10
0
7
13
64
83
12
15
20
0
80
49
9
1
49
10
0
7
14
13
70
9
98
15
44
43
15
7
16
78
49
17
2
6
14
49
18
1
15
20
0
49
19
0
49
10
0
4
3
83
12
11
I
7
I
1
I
0
I
0
I
-2
p
20
x
6
@Album
x
4
Hash
x
16
new_from_literal
x
2
id
x
3
[]=
x
4
load
x
8
tag_pks=
x
3
@db
x
4
sqls
x
2
[]
x
6
should
s
73
DELETE FROM albums_tags WHERE ((album_id = 2) AND (tag_id NOT IN (1, 3)))
x
2
==
s
51
SELECT tag_id FROM albums_tags WHERE (album_id = 2)
n
x
6
Regexp
s
86
INSERT INTO albums_tags \((album_id, tag_id|tag_id, album_id)\) VALUES \((2, 1|1, 2)\)
x
3
new
x
2
=~
x
6
length
p
13
I
0
I
37
I
21
I
38
I
29
I
39
I
38
I
3a
I
47
I
3b
I
66
I
3c
I
73
x
120
/Users/jhbabon/Code/projects/wuakitv/src/shield/vendor/bundle/gems/sequel-3.39.0/spec/extensions/association_pks_spec.rb
p
1
x
4
sqls
s
71
should use transactions if the object is configured to use transactions
M
1
p
2
x
9
for_block
t
n
x
9
__block__
i
236
39
0
44
43
1
79
49
2
1
13
7
3
79
49
4
2
15
49
5
1
19
0
15
20
0
2
13
18
2
49
6
1
15
15
20
0
79
80
35
2
13
18
2
49
7
1
15
15
39
8
49
9
0
49
10
0
7
11
64
7
12
64
7
13
64
7
14
64
35
4
83
15
15
39
16
44
43
1
79
49
2
1
13
7
3
80
49
4
2
15
49
5
1
19
1
15
20
1
2
13
18
2
49
6
1
15
15
20
1
79
4
3
35
2
13
18
2
49
17
1
15
15
39
8
49
9
0
19
2
15
20
2
78
49
18
1
49
10
0
7
11
64
83
15
15
20
2
79
49
18
1
49
10
0
7
19
64
83
15
15
20
2
80
49
18
1
49
10
0
7
20
64
83
15
15
20
2
4
3
49
18
1
49
10
0
7
21
13
70
9
203
15
44
43
22
7
23
78
49
24
2
6
21
49
25
1
15
20
2
4
4
49
18
1
49
10
0
7
14
64
83
15
15
20
2
49
26
0
49
10
0
4
5
83
15
11
I
9
I
3
I
0
I
0
I
-2
p
27
x
7
@Artist
x
4
Hash
x
16
new_from_literal
x
2
id
x
3
[]=
x
4
load
x
17
use_transactions=
x
10
album_pks=
x
3
@db
x
4
sqls
x
6
should
s
5
BEGIN
s
52
UPDATE albums SET artist_id = 1 WHERE (id IN (1, 2))
s
88
UPDATE albums SET artist_id = NULL WHERE ((albums.artist_id = 1) AND (id NOT IN (1, 2)))
s
6
COMMIT
x
2
==
x
6
@Album
x
8
tag_pks=
x
2
[]
s
73
DELETE FROM albums_tags WHERE ((album_id = 2) AND (tag_id NOT IN (1, 3)))
s
51
SELECT tag_id FROM albums_tags WHERE (album_id = 2)
n
x
6
Regexp
s
86
INSERT INTO albums_tags \((album_id, tag_id|tag_id, album_id)\) VALUES \((2, 1|1, 2)\)
x
3
new
x
2
=~
x
6
length
p
35
I
0
I
40
I
17
I
41
I
22
I
42
I
30
I
43
I
3b
I
44
I
3e
I
45
I
41
I
46
I
49
I
48
I
60
I
49
I
6b
I
4a
I
7a
I
4b
I
82
I
4c
I
91
I
4d
I
a0
I
4e
I
af
I
4f
I
cf
I
50
I
df
I
51
I
ec
x
120
/Users/jhbabon/Code/projects/wuakitv/src/shield/vendor/bundle/gems/sequel-3.39.0/spec/extensions/association_pks_spec.rb
p
3
x
6
artist
x
5
album
x
4
sqls
s
106
should automatically convert keys to numbers if the primary key is an integer for one_to_many associations
M
1
p
2
x
9
for_block
t
n
x
9
__block__
i
77
39
0
49
1
0
7
2
49
3
1
7
4
7
5
13
18
3
49
6
2
15
15
39
7
44
43
8
79
49
9
1
13
7
2
79
49
6
2
15
49
10
1
7
11
64
7
12
64
35
2
13
18
2
49
13
1
15
15
39
14
49
15
0
49
16
0
7
17
64
7
18
64
35
2
83
19
11
I
6
I
0
I
0
I
0
I
-2
p
20
x
6
@Album
x
9
db_schema
x
2
id
x
2
[]
x
4
type
x
7
integer
x
3
[]=
x
7
@Artist
x
4
Hash
x
16
new_from_literal
x
4
load
s
1
1
s
1
2
x
10
album_pks=
x
3
@db
x
4
sqls
x
6
should
s
52
UPDATE albums SET artist_id = 1 WHERE (id IN (1, 2))
s
88
UPDATE albums SET artist_id = NULL WHERE ((albums.artist_id = 1) AND (id NOT IN (1, 2)))
x
2
==
p
9
I
0
I
55
I
16
I
56
I
3a
I
57
I
45
I
58
I
4d
x
120
/Users/jhbabon/Code/projects/wuakitv/src/shield/vendor/bundle/gems/sequel-3.39.0/spec/extensions/association_pks_spec.rb
p
0
s
104
should not automatically convert keys if the primary key is not an integer for many_to_many associations
M
1
p
2
x
9
for_block
t
n
x
9
__block__
i
77
39
0
49
1
0
7
2
49
3
1
7
4
7
5
13
18
3
49
6
2
15
15
39
7
44
43
8
79
49
9
1
13
7
2
79
49
6
2
15
49
10
1
7
11
64
7
12
64
35
2
13
18
2
49
13
1
15
15
39
14
49
15
0
49
16
0
7
17
64
7
18
64
35
2
83
19
11
I
6
I
0
I
0
I
0
I
-2
p
20
x
6
@Album
x
9
db_schema
x
2
id
x
2
[]
x
4
type
x
6
string
x
3
[]=
x
7
@Artist
x
4
Hash
x
16
new_from_literal
x
4
load
s
1
1
s
1
2
x
10
album_pks=
x
3
@db
x
4
sqls
x
6
should
s
56
UPDATE albums SET artist_id = 1 WHERE (id IN ('1', '2'))
s
92
UPDATE albums SET artist_id = NULL WHERE ((albums.artist_id = 1) AND (id NOT IN ('1', '2')))
x
2
==
p
9
I
0
I
5c
I
16
I
5d
I
3a
I
5e
I
45
I
5f
I
4d
x
120
/Users/jhbabon/Code/projects/wuakitv/src/shield/vendor/bundle/gems/sequel-3.39.0/spec/extensions/association_pks_spec.rb
p
0
M
1
p
2
x
9
for_block
t
n
x
9
__block__
i
140
39
0
49
1
0
7
2
49
3
1
7
4
7
5
13
18
3
49
6
2
15
15
39
7
44
43
8
79
49
9
1
13
7
2
80
49
6
2
15
49
10
1
7
11
64
7
12
64
35
2
13
18
2
49
13
1
15
15
39
14
49
15
0
19
0
15
20
0
78
49
3
1
49
16
0
7
17
64
83
18
15
20
0
79
49
3
1
49
16
0
7
19
64
83
18
15
20
0
80
49
3
1
49
16
0
7
20
13
70
9
123
15
44
43
21
7
22
78
49
23
2
6
20
49
24
1
15
20
0
49
25
0
49
16
0
4
3
83
18
11
I
7
I
1
I
0
I
0
I
-2
p
26
x
4
@Tag
x
9
db_schema
x
2
id
x
2
[]
x
4
type
x
7
integer
x
3
[]=
x
6
@Album
x
4
Hash
x
16
new_from_literal
x
4
load
s
1
1
s
1
3
x
8
tag_pks=
x
3
@db
x
4
sqls
x
6
should
s
73
DELETE FROM albums_tags WHERE ((album_id = 2) AND (tag_id NOT IN (1, 3)))
x
2
==
s
51
SELECT tag_id FROM albums_tags WHERE (album_id = 2)
n
x
6
Regexp
s
86
INSERT INTO albums_tags \((album_id, tag_id|tag_id, album_id)\) VALUES \((2, 1|1, 2)\)
x
3
new
x
2
=~
x
6
length
p
15
I
0
I
63
I
16
I
64
I
3a
I
65
I
42
I
66
I
51
I
67
I
60
I
68
I
7f
I
69
I
8c
x
120
/Users/jhbabon/Code/projects/wuakitv/src/shield/vendor/bundle/gems/sequel-3.39.0/spec/extensions/association_pks_spec.rb
p
1
x
4
sqls
s
111
should not automatically convert keys to numbers if the primary key is an integer for many_to_many associations
M
1
p
2
x
9
for_block
t
n
x
9
__block__
i
172
39
0
49
1
0
7
2
49
3
1
7
4
7
5
13
18
3
49
6
2
15
15
39
7
44
43
8
79
49
9
1
13
7
2
80
49
6
2
15
49
10
1
7
11
64
7
12
64
35
2
13
18
2
49
13
1
15
15
39
14
49
15
0
19
0
15
20
0
78
49
3
1
49
16
0
7
17
64
83
18
15
20
0
79
49
3
1
49
16
0
7
19
64
83
18
15
20
0
80
49
3
1
49
16
0
7
20
13
70
9
123
15
44
43
21
7
22
78
49
23
2
6
20
49
24
1
15
20
0
4
3
49
3
1
49
16
0
7
25
13
70
9
155
15
44
43
21
7
26
78
49
23
2
6
25
49
24
1
15
20
0
49
27
0
49
16
0
4
4
83
18
11
I
7
I
1
I
0
I
0
I
-2
p
28
x
4
@Tag
x
9
db_schema
x
2
id
x
2
[]
x
4
type
x
6
string
x
3
[]=
x
6
@Album
x
4
Hash
x
16
new_from_literal
x
4
load
s
1
1
s
1
3
x
8
tag_pks=
x
3
@db
x
4
sqls
x
6
should
s
77
DELETE FROM albums_tags WHERE ((album_id = 2) AND (tag_id NOT IN ('1', '3')))
x
2
==
s
51
SELECT tag_id FROM albums_tags WHERE (album_id = 2)
n
x
6
Regexp
s
90
INSERT INTO albums_tags \((album_id, tag_id|tag_id, album_id)\) VALUES \((2, '1'|'1', 2)\)
x
3
new
x
2
=~
n
s
90
INSERT INTO albums_tags \((album_id, tag_id|tag_id, album_id)\) VALUES \((2, '3'|'3', 2)\)
x
6
length
p
17
I
0
I
6d
I
16
I
6e
I
3a
I
6f
I
42
I
70
I
51
I
71
I
60
I
72
I
7f
I
73
I
9f
I
74
I
ac
x
120
/Users/jhbabon/Code/projects/wuakitv/src/shield/vendor/bundle/gems/sequel-3.39.0/spec/extensions/association_pks_spec.rb
p
1
x
4
sqls
p
23
I
0
I
4
I
8
I
1e
I
13
I
23
I
1e
I
29
I
29
I
2f
I
34
I
36
I
3f
I
3f
I
4a
I
54
I
55
I
5b
I
60
I
62
I
6b
I
6c
I
76
x
120
/Users/jhbabon/Code/projects/wuakitv/src/shield/vendor/bundle/gems/sequel-3.39.0/spec/extensions/association_pks_spec.rb
p
0
x
8
describe
p
5
I
0
I
1
I
1f
I
3
I
2c
x
120
/Users/jhbabon/Code/projects/wuakitv/src/shield/vendor/bundle/gems/sequel-3.39.0/spec/extensions/association_pks_spec.rb
p
0
